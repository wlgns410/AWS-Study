# Auto Scaling Group Policy

<br>

![스크린샷 2023-03-30 오후 10 14 05](https://user-images.githubusercontent.com/81137234/228847394-3ce9f50b-9132-4086-aa52-ecddee8a8f36.png)

<br>

이미 생성되있는 asg의 자동 크기 조절 탭을 보면  
위처럼 지정할 수 있는 것이 있다.  
1. 동적 스케일링
2. 예측 스케일링 정책
3. 예약된 작업

<br>

![스크린샷 2023-03-30 오후 10 16 33](https://user-images.githubusercontent.com/81137234/228848046-d0feeb0b-51f6-4a47-9bc0-442c58e9549f.png)

<br>

`예약된 작업`은  향후 스케일링 작업을 예약할 수 있다.  
사전에 미리 알고 있는 이벤트에 대해서 작업을 예약할 수 있는 기능이다.  
예를 들어 주말 치킨 데이 이벤트로 쿠폰을 뿌린다면 이 기능을 사용하면 되겠다.

<br>

![스크린샷 2023-03-30 오후 10 21 36](https://user-images.githubusercontent.com/81137234/228849500-0a8c78dd-2327-466c-8fa3-2bc5d40f54b7.png)

![스크린샷 2023-03-30 오후 10 22 49](https://user-images.githubusercontent.com/81137234/228850101-3734bea6-5cdd-47c7-8788-0e83cf908b24.png)

![스크린샷 2023-03-30 오후 10 24 02](https://user-images.githubusercontent.com/81137234/228850415-b478936b-0b04-4950-b1dc-b2d2a146aea1.png)

<br>

`예측 스케일링 정책`은 머신 러닝 기반으로 한다.  
예측을 토대로 스케일링을 자동으로 수행한다.  

CPU 사용률 또는 네트워크 입출력량 등을 목표 사용률을 넘는다면 수행한다.  
또한 지난주나 저번에 사용률을 넘었다면 예측이 자동으로 생성되며 이를 따라서 ASG가 자동으로 스케일링된다.  
일주일 간의 사용을 토대로 이루어진다는 점을 알아야한다.  


<br>

![스크린샷 2023-03-30 오후 10 26 40](https://user-images.githubusercontent.com/81137234/228851213-e5c198c3-7a1c-482d-af45-a6c8d7fdae27.png)
![스크린샷 2023-03-30 오후 10 26 48](https://user-images.githubusercontent.com/81137234/228851224-b83d0775-9f57-46e8-b9c7-bccc912f3481.png)
![스크린샷 2023-03-30 오후 10 26 56](https://user-images.githubusercontent.com/81137234/228851237-81efe08c-3a31-44a1-8871-26025282eb6f.png)

<br>

`동적 스케일링`은 
1. 대상 추적 크기 조정
2. 단계 크기 조정
3. 단순 크기 조정
으로 나뉜다.

<br>

![스크린샷 2023-03-30 오후 10 28 42](https://user-images.githubusercontent.com/81137234/228851713-9ad9bdbe-7e09-4485-8277-a957504fc5a9.png)

단순 크기 조정은 경보가 발생될 때마다 용량이 자동으로 스케일링된다.  
그 전에 경보를 생성해야한다는 점을 알아야한다.  
용량 유닛을 설정하거나 용량을 합치는 설정을 할 수 있다.  
마지막으로는 크기 조정시간으로 300초동안 freeze 된다는 점도 알아야한다.

<br>

![스크린샷 2023-03-30 오후 10 31 13](https://user-images.githubusercontent.com/81137234/228852372-51eedfb6-a84c-4542-997c-bc3aa9c495d7.png)

<br>

단계 크기 조정은 경보 값을 기준으로 여러 step을 갖도록 다수의 경보를 설정할 수 있다.  
단순 크기 조정은 1개 경보만 가능하고, 단계 크기 조정은 여러개 경보가 가능하다는 점이 다르다.  


<br>

![스크린샷 2023-03-30 오후 10 32 58](https://user-images.githubusercontent.com/81137234/228852797-cb4f8277-25fe-4897-aeee-a98aee574fd9.png)

![스크린샷 2023-03-30 오후 10 34 07](https://user-images.githubusercontent.com/81137234/228853117-10ef130b-65be-4e35-ac9e-82fa7926e550.png)

<br>

마지막으로 동적 스케일링을 알아보자.  
이 정책을 통해서 CW 경보를 생성할 수 있다.  
생성을 해보면 위처럼 정책이 어떻다고 나와있다.  


<br>

이처럼 ASG 정책을 설정하면 된다.